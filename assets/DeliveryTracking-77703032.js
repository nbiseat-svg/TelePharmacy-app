import{j as e}from"./index-1a78f5cf.js";import{d as g,r as t,L as n}from"./vendor-d9bade96.js";import{a as k}from"./redux-e3095c52.js";import{D as i}from"./deliveryService-b76a95e0.js";import"./orderService-3fd5acba.js";import{m as d}from"./animations-c3d91ae5.js";import"./i18n-b264d0aa.js";import"./axios-edfcd65b.js";const Z=()=>{const{id:o}=g(),m=k(s=>s.auth.user),[l,y]=t.useState(null),[r,j]=t.useState(null),[N,v]=t.useState(!0),[p,u]=t.useState(""),h={_id:o,orderItems:[{name:"Paracetamol 500mg",qty:2,price:5.99,image:"/src/assets/med1.jpg"}],totalPrice:11.98,isPaid:!0,paidAt:"2025-09-10T10:30:00Z",isDelivered:!1,createdAt:"2025-09-09T14:20:00Z",deliveryTracking:{trackingNumber:"TRK123456789",carrier:"EthioPost",estimatedDeliveryDate:"2025-09-15T10:00:00Z",deliverySteps:[{status:"pending",location:"Pharmacy Warehouse",timestamp:"2025-09-10T11:00:00Z",notes:"Order placed and being processed"},{status:"picked",location:"Pharmacy Warehouse",timestamp:"2025-09-11T09:30:00Z",notes:"Order picked and packaged"},{status:"in-transit",location:"Distribution Center",timestamp:"2025-09-12T14:15:00Z",notes:"Order in transit to local delivery facility"},{status:"out-for-delivery",location:"Local Delivery Facility",timestamp:"2025-09-14T08:00:00Z",notes:"Order out for delivery"}]}};if(t.useEffect(()=>{m&&(async()=>{try{setTimeout(()=>{y(h),j(h.deliveryTracking),v(!1)},1e3)}catch(a){u(a.message),v(!1)}})()},[o,m]),N)return e.jsx("div",{className:"delivery-tracking-page",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading delivery tracking information..."})]})});if(p)return e.jsx("div",{className:"delivery-tracking-page",children:e.jsxs("div",{className:"error-container",children:[e.jsxs("p",{children:["Error: ",p]}),e.jsx(n,{to:"/orders",className:"btn-primary",children:"Back to Orders"})]})});if(!l||!r)return e.jsx("div",{className:"delivery-tracking-page",children:e.jsxs("div",{className:"error-container",children:[e.jsx("p",{children:"Order not found"}),e.jsx(n,{to:"/orders",className:"btn-primary",children:"Back to Orders"})]})});const x=i.getCurrentDeliveryStatus(r.deliverySteps),c=i.getDeliveryProgress(r.deliverySteps);return e.jsx(d.div,{className:"delivery-tracking-page",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"delivery-tracking-container",children:[e.jsxs(d.div,{className:"delivery-header",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[e.jsx("h2",{children:"Delivery Tracking"}),e.jsxs("p",{children:["Track your order #",l._id]})]}),e.jsxs(d.div,{className:"delivery-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsxs("div",{className:"tracking-info",children:[e.jsxs("div",{className:"tracking-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Tracking Number:"}),e.jsx("span",{className:"value",children:r.trackingNumber})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Carrier:"}),e.jsx("span",{className:"value",children:r.carrier})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Estimated Delivery:"}),e.jsx("span",{className:"value",children:i.formatDeliveryDate(r.estimatedDeliveryDate)})]})]}),e.jsxs("div",{className:"progress-container",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${c}%`}})}),e.jsx("div",{className:"progress-steps",children:["pending","picked","in-transit","out-for-delivery","delivered"].map((s,a)=>e.jsxs("div",{className:`step ${x===s||c>a*20?"completed":""}`,children:[e.jsx("div",{className:"step-icon",children:x===s?"üìç":a<c/20?"‚úÖ":"‚è≥"}),e.jsx("div",{className:"step-label",children:i.getStatusDisplayText(s)})]},s))})]})]}),e.jsxs("div",{className:"delivery-steps",children:[e.jsx("h3",{children:"Delivery Timeline"}),e.jsx("div",{className:"steps-container",children:r.deliverySteps.map((s,a)=>e.jsxs("div",{className:"step-card",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("div",{className:"step-status",children:e.jsx("span",{className:`status ${i.getStatusClass(s.status)}`,children:i.getStatusDisplayText(s.status)})}),e.jsx("div",{className:"step-time",children:i.formatDeliveryDate(s.timestamp)})]}),e.jsxs("div",{className:"step-location",children:[e.jsx("div",{className:"location-icon",children:"üìç"}),e.jsx("div",{className:"location-text",children:s.location})]}),s.notes&&e.jsx("div",{className:"step-notes",children:s.notes})]},a))})]}),e.jsxs("div",{className:"order-summary",children:[e.jsx("h3",{children:"Order Summary"}),e.jsx("div",{className:"order-items",children:l.orderItems.map((s,a)=>e.jsxs("div",{className:"order-item",children:[e.jsx("img",{src:s.image,alt:s.name}),e.jsxs("div",{className:"item-details",children:[e.jsx("h4",{children:s.name}),e.jsxs("p",{children:["Quantity: ",s.qty]})]}),e.jsxs("div",{className:"item-price",children:["$",s.qty*s.price]})]},a))}),e.jsx("div",{className:"order-total",children:e.jsxs("span",{children:["Total: $",l.totalPrice]})})]}),e.jsx("div",{className:"actions",children:e.jsx(n,{to:"/orders",className:"btn-secondary",children:"Back to Orders"})})]})]})})};export{Z as default};
