import{j as r}from"./index-a78a0123.js";import{r as n,u as E,L as f}from"./vendor-d9bade96.js";import{u as w,a as N}from"./redux-e3095c52.js";import{u as b}from"./userActions-1556e90d.js";/* empty css             */import{m as y}from"./animations-c3d91ae5.js";import"./i18n-b264d0aa.js";import"./axios-edfcd65b.js";class i{static handleApiError(e){if(console.error("API Error:",e),e.response){const{status:a,data:s}=e.response;switch(a){case 400:return{type:"validation",message:s.message||"Invalid request data",details:s.errors||[]};case 401:return{type:"authentication",message:"You need to log in to perform this action",redirectTo:"/login"};case 403:return{type:"authorization",message:"You do not have permission to perform this action"};case 404:return{type:"not_found",message:"The requested resource was not found"};case 500:return{type:"server",message:"Server error. Please try again later"};default:return{type:"unknown",message:s.message||"An unexpected error occurred"}}}else return e.request?{type:"network",message:"Network error. Please check your connection and try again"}:{type:"unknown",message:e.message||"An unexpected error occurred"}}static handleFormErrors(e){const a={};return e&&typeof e=="object"&&Object.keys(e).forEach(s=>{Array.isArray(e[s])?a[s]=e[s][0]:a[s]=e[s]}),a}static createUserMessage(e){return typeof e=="string"?e:e&&e.message?e.message:"An unexpected error occurred. Please try again."}static logError(e,a=""){console.error(`Error ${a}:`,e)}}const D=()=>{const[c,e]=n.useState(""),[a,s]=n.useState(""),[o,d]=n.useState({}),x=w(),u=E(),{userInfo:m,loading:p,error:g}=N(t=>t.auth);n.useEffect(()=>{m&&u("/")},[m,u]);const v=async t=>{t.preventDefault(),d({});try{await x(b({email:c,password:a})).unwrap()}catch(h){const l=i.handleApiError(h);if(l.type==="validation"&&l.details){const j=i.handleFormErrors(l.details);d(j)}i.logError(h,"Login")}};return r.jsx(y.div,{className:"auth-page",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:r.jsx("div",{className:"auth-container",children:r.jsxs(y.div,{className:"auth-form-container",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[r.jsx("h2",{children:"Login to Your Account"}),g&&r.jsx("div",{className:"alert alert-danger",children:i.createUserMessage(g)}),r.jsxs("form",{onSubmit:v,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address"}),r.jsx("input",{type:"email",id:"email",placeholder:"Enter email",value:c,onChange:t=>e(t.target.value),required:!0,"aria-invalid":o.email?"true":"false"}),o.email&&r.jsx("div",{className:"error-message",children:o.email})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Password"}),r.jsx("input",{type:"password",id:"password",placeholder:"Enter password",value:a,onChange:t=>s(t.target.value),required:!0,"aria-invalid":o.password?"true":"false"}),o.password&&r.jsx("div",{className:"error-message",children:o.password})]}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:p,children:p?"Signing In...":"Sign In"})]}),r.jsxs("div",{className:"auth-links",children:[r.jsxs("p",{children:["Don't have an account? ",r.jsx(f,{to:"/register",children:"Register"})]}),r.jsx("p",{children:r.jsx(f,{to:"/forgot-password",children:"Forgot Password?"})})]})]})})})};export{D as default};
