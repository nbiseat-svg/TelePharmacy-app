import{j as s}from"./index-1a78f5cf.js";import{u as g,r as a,L as b}from"./vendor-d9bade96.js";import{a as q}from"./redux-e3095c52.js";import{P as c}from"./prescriptionService-77825949.js";import{m as d}from"./animations-c3d91ae5.js";import"./i18n-b264d0aa.js";import"./axios-edfcd65b.js";const M=()=>{g();const m=q(e=>e.auth.user),[r,n]=a.useState("my-prescriptions"),[p,h]=a.useState([]),[y,l]=a.useState(!1),[u,o]=a.useState(""),[x,j]=a.useState(""),v=[{_id:"1",patient:{name:"John Doe"},pharmacist:{name:"Dr. Sarah Williams"},medications:[{name:"Lisinopril",dosage:"10mg",quantity:30,instructions:"Take one tablet daily",refills:2},{name:"Atorvastatin",dosage:"20mg",quantity:30,instructions:"Take one tablet at bedtime",refills:1}],diagnosis:"Hypertension and high cholesterol",status:"active",issuedDate:"2025-09-01T10:00:00Z",expiryDate:"2025-12-01T10:00:00Z"},{_id:"2",patient:{name:"John Doe"},pharmacist:{name:"Dr. Michael Chen"},medications:[{name:"Metformin",dosage:"500mg",quantity:60,instructions:"Take one tablet twice daily with meals",refills:3}],diagnosis:"Type 2 Diabetes",status:"filled",issuedDate:"2025-08-15T14:30:00Z",expiryDate:"2025-11-15T14:30:00Z"}];a.useEffect(()=>{m&&(async()=>{l(!0),o("");try{setTimeout(()=>{h(v),l(!1)},1e3)}catch(i){o(i.message),l(!1)}})()},[m]);const f=async e=>{try{j("Refill request submitted successfully!"),h(i=>i.map(t=>t._id===e?{...t,refillRequests:[{status:"pending"}]}:t)),setTimeout(()=>j(""),3e3)}catch(i){o(i.message)}},N=async e=>{e.preventDefault(),alert("Prescription request submitted successfully!"),n("my-prescriptions")};return s.jsx(d.div,{className:"prescription-page",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:s.jsxs("div",{className:"prescription-container",children:[s.jsxs(d.div,{className:"prescription-header",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[s.jsx("h2",{children:"Prescription Management"}),s.jsx("p",{children:"View and manage your prescriptions"})]}),s.jsxs(d.div,{className:"prescription-tabs",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[s.jsxs("div",{className:"tabs",children:[s.jsx("button",{className:r==="my-prescriptions"?"active":"",onClick:()=>n("my-prescriptions"),children:"My Prescriptions"}),s.jsx("button",{className:r==="request-prescription"?"active":"",onClick:()=>n("request-prescription"),children:"Request New Prescription"})]}),s.jsxs("div",{className:"tab-content",children:[r==="my-prescriptions"&&s.jsxs("div",{className:"tab-pane",children:[s.jsx("h3",{children:"My Prescriptions"}),u&&s.jsx("div",{className:"error-message",children:u}),x&&s.jsx("div",{className:"success-message",children:x}),y?s.jsx("div",{className:"loading",children:s.jsx("p",{children:"Loading prescriptions..."})}):p.length>0?s.jsx("div",{className:"prescriptions-list",children:p.map(e=>s.jsxs("div",{className:"prescription-card",children:[s.jsxs("div",{className:"prescription-header",children:[s.jsxs("div",{children:[s.jsxs("h4",{children:["Prescription #",e._id]}),s.jsxs("p",{children:["Issued by: ",e.pharmacist.name]})]}),s.jsx("div",{className:"prescription-status",children:s.jsx("span",{className:`status ${c.getStatusClass(e.status)}`,children:c.getStatusDisplayText(e.status)})})]}),s.jsxs("div",{className:"prescription-details",children:[s.jsxs("div",{className:"detail-row",children:[s.jsx("span",{className:"label",children:"Diagnosis:"}),s.jsx("span",{className:"value",children:e.diagnosis})]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("span",{className:"label",children:"Issued Date:"}),s.jsx("span",{className:"value",children:c.formatPrescriptionDate(e.issuedDate)})]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("span",{className:"label",children:"Expiry Date:"}),s.jsx("span",{className:"value",children:c.formatPrescriptionDate(e.expiryDate)})]})]}),s.jsxs("div",{className:"medications-list",children:[s.jsx("h5",{children:"Medications"}),e.medications.map((i,t)=>s.jsx("div",{className:"medication-item",children:s.jsxs("div",{className:"medication-info",children:[s.jsxs("h6",{children:[i.name," (",i.dosage,")"]}),s.jsxs("p",{children:["Quantity: ",i.quantity]}),s.jsxs("p",{children:["Instructions: ",i.instructions]}),s.jsxs("p",{children:["Refills remaining: ",i.refills]})]})},t))]}),s.jsxs("div",{className:"prescription-actions",children:[s.jsx("button",{className:"btn-secondary",onClick:()=>f(e._id),disabled:e.status!=="filled"||e.medications.some(i=>i.refills<=0)||e.refillRequests.length>0,children:e.refillRequests.length>0?"Refill Requested":"Request Refill"}),s.jsx(b,{to:`/prescription/${e._id}`,className:"btn-primary",children:"View Details"})]})]},e._id))}):s.jsxs("div",{className:"no-prescriptions",children:[s.jsx("h4",{children:"You don't have any prescriptions yet"}),s.jsx("p",{children:"Consult with a pharmacist to get your first prescription"}),s.jsx("button",{className:"btn-primary",onClick:()=>n("request-prescription"),children:"Request New Prescription"})]})]}),r==="request-prescription"&&s.jsxs("div",{className:"tab-pane",children:[s.jsx("h3",{children:"Request New Prescription"}),s.jsx("div",{className:"request-form",children:s.jsxs("form",{onSubmit:N,children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"symptoms",children:"Describe your symptoms"}),s.jsx("textarea",{id:"symptoms",rows:"4",placeholder:"Please describe your symptoms in detail...",required:!0})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"medical-history",children:"Medical History"}),s.jsx("textarea",{id:"medical-history",rows:"3",placeholder:"List any relevant medical conditions, allergies, or medications you're currently taking..."})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"preferred-pharmacist",children:"Preferred Pharmacist (Optional)"}),s.jsxs("select",{id:"preferred-pharmacist",children:[s.jsx("option",{value:"",children:"Select a pharmacist"}),s.jsx("option",{value:"1",children:"Dr. Sarah Williams"}),s.jsx("option",{value:"2",children:"Dr. Michael Chen"})]})]}),s.jsx("button",{type:"submit",className:"btn-primary",children:"Submit Request"})]})})]})]})]})]})})};export{M as default};
