import{j as a}from"./index-a78a0123.js";import{r as h}from"./vendor-d9bade96.js";import{m as v}from"./animations-c3d91ae5.js";import"./redux-e3095c52.js";import"./i18n-b264d0aa.js";const H=({isOpen:n,onClose:c,directions:t,pharmacy:r,userLocation:s})=>n?a.jsx("div",{className:"directions-modal-overlay",onClick:c,children:a.jsxs("div",{className:"directions-modal",onClick:i=>i.stopPropagation(),children:[a.jsxs("div",{className:"directions-modal-header",children:[a.jsxs("h2",{children:["Directions to ",r==null?void 0:r.name]}),a.jsx("button",{className:"close-button",onClick:c,children:"×"})]}),a.jsx("div",{className:"directions-modal-content",children:t?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"route-summary",children:[a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{className:"summary-label",children:"Distance:"}),a.jsx("span",{className:"summary-value",children:t.distance})]}),a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{className:"summary-label",children:"Estimated Time:"}),a.jsx("span",{className:"summary-value",children:t.duration})]})]}),a.jsxs("div",{className:"route-instructions",children:[a.jsx("h3",{children:"Turn-by-turn Directions"}),a.jsx("ol",{className:"instructions-list",children:t.steps.map((i,m)=>a.jsxs("li",{className:"instruction-step",children:[a.jsx("div",{className:"step-icon",children:m+1}),a.jsxs("div",{className:"step-content",children:[a.jsx("div",{className:"step-text",children:i.instruction}),a.jsx("div",{className:"step-distance",children:i.distance})]})]},m))})]}),a.jsx("div",{className:"route-actions",children:a.jsx("button",{className:"btn-primary",onClick:()=>{alert("This would open your device's maps app with the route")},children:"Open in Maps"})})]}):a.jsx("div",{className:"loading-directions",children:a.jsx("p",{children:"Calculating directions..."})})})]})}):null,I=(n,c)=>{const r=k(c.lat-n.lat),s=k(c.lng-n.lng),i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(k(n.lat))*Math.cos(k(c.lat))*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},k=n=>n*(Math.PI/180),B=(n,c)=>{const t=I(n,c),r=t/30,s=Math.round(r*60);let i;if(s<60)i=`${s} min`;else{const o=Math.floor(s/60),x=s%60;i=`${o} hr ${x} min`}const m=q(n,c,t);return{distance:`${t.toFixed(1)} km`,duration:i,steps:m}},q=(n,c,t)=>{const r=Math.max(3,Math.min(5,Math.floor(t/5))),s=[];s.push({instruction:`Start from ${n.name}`,distance:"0 km"});for(let i=1;i<r-1;i++){const m=i/(r-1),o=(t*m).toFixed(1),x=[`Continue straight for ${o} km`,`Turn left and continue for ${o} km`,`Turn right and continue for ${o} km`,`Take the roundabout and continue for ${o} km`,`Follow the main road for ${o} km`];s.push({instruction:x[Math.floor(Math.random()*x.length)],distance:`${o} km`})}return s.push({instruction:`Arrive at ${c.name}`,distance:`${t.toFixed(1)} km`}),s};const K=()=>{const[n,c]=h.useState(""),[t,r]=h.useState(""),[s,i]=h.useState([]),[m,o]=h.useState(!1),[x,f]=h.useState(""),[D,P]=h.useState(!1),[y,S]=h.useState(null),[w,C]=h.useState(null),[j,U]=h.useState({lat:9.03,lng:38.74}),[g,L]=h.useState([]),A=[{id:1,name:"Addis Ababa Central Pharmacy",address:"123 Unity Park, Addis Ababa",distance:"0.5 km",availability:"In Stock",price:"$12.99",phone:"+251 11 123 4567",hours:"Open 24/7",city:"Addis Ababa",coordinates:{lat:9.03,lng:38.74}},{id:2,name:"Hawassa Medical Center",address:"456 Lake Road, Hawassa",distance:"1.2 km",availability:"Low Stock",price:"$13.50",phone:"+251 11 234 5678",hours:"8:00 AM - 10:00 PM",city:"Hawassa",coordinates:{lat:7.05,lng:38.4833}},{id:3,name:"Mekelle HealthPlus",address:"789 University Ave, Mekelle",distance:"2.3 km",availability:"In Stock",price:"$11.75",phone:"+251 11 345 6789",hours:"7:00 AM - 11:00 PM",city:"Mekelle",coordinates:{lat:13.4933,lng:39.45}},{id:4,name:"Dire Dawa Medical Store",address:"321 Commercial St, Dire Dawa",distance:"1.8 km",availability:"In Stock",price:"$10.25",phone:"+251 11 456 7890",hours:"24/7",city:"Dire Dawa",coordinates:{lat:9.6,lng:41.8667}},{id:5,name:"Bahir Dar Pharmacy",address:"654 Lake Tana Rd, Bahir Dar",distance:"0.9 km",availability:"In Stock",price:"$14.50",phone:"+251 11 567 8901",hours:"8:00 AM - 9:00 PM",city:"Bahir Dar",coordinates:{lat:11.59,lng:37.39}}],F=[{name:"Addis Ababa",lat:9.03,lng:38.74},{name:"Hawassa",lat:7.05,lng:38.4833},{name:"Mekelle",lat:13.4933,lng:39.45},{name:"Dire Dawa",lat:9.6,lng:41.8667},{name:"Bahir Dar",lat:11.59,lng:37.39},{name:"Adama",lat:8.54,lng:39.27},{name:"Gondar",lat:12.6,lng:37.4667},{name:"Jimma",lat:7.6733,lng:36.8333}],E=async e=>{e.preventDefault(),o(!0),f("");try{setTimeout(()=>{i(A),o(!1)},1e3)}catch{f("Failed to search pharmacies. Please try again."),o(!1)}},p=(e,l)=>{const M=(l-36)/6*100,$=(14-e)/(14-7)*100;return{x:M,y:$}},R=(e,l)=>{const d=[];for(let u=0;u<=10;u++){const b=u/10,M=e.lat+(l.lat-e.lat)*b,$=e.lng+(l.lng-e.lng)*b;d.push({lat:M,lng:$})}return d},T=e=>{S(e),P(!0);const l={lat:j.lat,lng:j.lng,name:t||"Your Location"},d={lat:e.coordinates.lat,lng:e.coordinates.lng,name:e.name},N=B(l,d);C(N);const u=R(l,d);L(u)};return a.jsxs(v.div,{className:"pharmacy-finder-page",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[a.jsxs("div",{className:"pharmacy-finder-container",children:[a.jsxs(v.div,{className:"pharmacy-finder-header",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[a.jsx("h2",{children:"Find a Pharmacy in Ethiopia"}),a.jsx("p",{children:"Locate pharmacies with the medications you need across Ethiopian cities"})]}),a.jsx(v.div,{className:"search-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:a.jsxs("form",{onSubmit:E,className:"search-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"medication",children:"Medication Name"}),a.jsx("input",{type:"text",id:"medication",placeholder:"Enter medication name",value:n,onChange:e=>c(e.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"location",children:"Your Location"}),a.jsx("input",{type:"text",id:"location",placeholder:"Enter your location or use current location",value:t,onChange:e=>r(e.target.value),required:!0}),a.jsx("button",{type:"button",className:"current-location-btn",children:"Use Current Location"})]}),a.jsx("button",{type:"submit",className:"btn-primary",disabled:m,children:m?"Searching...":"Search Pharmacies"})]})}),x&&a.jsx(v.div,{className:"alert alert-danger",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:x}),a.jsxs(v.div,{className:"results-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[s.length>0&&a.jsxs("div",{className:"results-header",children:[a.jsx("h3",{children:"Available Pharmacies"}),a.jsxs("p",{children:["Found ",s.length,' pharmacies with "',n,'"']})]}),a.jsx("div",{className:"pharmacies-grid",children:s.map(e=>a.jsxs("div",{className:"pharmacy-card",children:[a.jsxs("div",{className:"pharmacy-header",children:[a.jsx("h4",{children:e.name}),a.jsx("span",{className:`availability ${e.availability==="In Stock"?"in-stock":"low-stock"}`,children:e.availability})]}),a.jsxs("div",{className:"pharmacy-details",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"City:"}),a.jsx("span",{className:"detail-value",children:e.city})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Address:"}),a.jsx("span",{className:"detail-value",children:e.address})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Distance:"}),a.jsx("span",{className:"detail-value",children:e.distance})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Price:"}),a.jsx("span",{className:"detail-value price",children:e.price})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Phone:"}),a.jsx("span",{className:"detail-value",children:e.phone})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Hours:"}),a.jsx("span",{className:"detail-value",children:e.hours})]})]}),a.jsxs("div",{className:"pharmacy-actions",children:[a.jsx("button",{className:"btn-secondary",onClick:()=>T(e),children:"Get Directions"}),a.jsx("button",{className:"btn-primary",children:"Call Pharmacy"})]})]},e.id))})]}),a.jsxs(v.div,{className:"map-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[a.jsx("h3",{children:"Ethiopian Pharmacy Locations"}),a.jsx("div",{className:"map-container",children:a.jsxs("div",{className:"ethiopia-map",children:[a.jsxs("div",{className:"ethiopia-outline",children:[F.map((e,l)=>{const d=p(e.lat,e.lng),N=s.some(u=>u.city===e.name);return a.jsxs("div",{className:`map-marker ${N?"with-pharmacy":""}`,style:{left:`${d.x}%`,top:`${d.y}%`},title:`${e.name}${N?" - Pharmacy Available":""}`,children:[a.jsx("div",{className:"marker-dot"}),a.jsx("div",{className:"marker-label",children:e.name})]},l)}),s.map(e=>{const l=p(e.coordinates.lat,e.coordinates.lng);return a.jsx("div",{className:"pharmacy-marker",style:{left:`${l.x}%`,top:`${l.y}%`},title:`${e.name} - ${e.city}`,children:a.jsx("div",{className:"pharmacy-icon",children:"℞"})},`pharmacy-${e.id}`)}),g.length>0&&a.jsx("div",{className:"route-path",children:g.map((e,l)=>{const d=p(e.lat,e.lng);return a.jsx("div",{className:"route-point",style:{left:`${d.x}%`,top:`${d.y}%`}},l)})}),g.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"start-marker",style:{left:`${p(j.lat,j.lng).x}%`,top:`${p(j.lat,j.lng).y}%`},children:a.jsx("div",{className:"marker-icon",children:"A"})}),a.jsx("div",{className:"end-marker",style:{left:`${p(y.coordinates.lat,y.coordinates.lng).x}%`,top:`${p(y.coordinates.lat,y.coordinates.lng).y}%`},children:a.jsx("div",{className:"marker-icon",children:"B"})})]})]}),a.jsxs("div",{className:"map-legend",children:[a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color city-marker"}),a.jsx("span",{children:"Major Cities"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color pharmacy-marker-legend"}),a.jsx("span",{children:"Pharmacies"})]}),g.length>0&&a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color route-legend"}),a.jsx("span",{children:"Route"})]})]})]})})]})]}),a.jsx(H,{isOpen:D,onClose:()=>{P(!1),L([])},directions:w,pharmacy:y,userLocation:t||"Your Location"})]})};export{K as default};
